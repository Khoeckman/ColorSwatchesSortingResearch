(function(){"use strict";function a(n,e,r){const t=[],c=n%e,u=Math.floor(n/e),i=Math.floor((r-1)/e);return c>0&&t.push(n-1),c<e-1&&n+1<r&&t.push(n+1),u>0&&t.push(n-e),u<i&&n+e<r&&t.push(n+e),t}self.onmessage=function(n){const{N:e,stride:r,path:t,distMatrix:c,maxImprovements:u}=n.data;function i(o){const f=a(o,r,e);let s=0;for(const l of f)s+=c[t[o]][t[l]];return s}let h=!0,g=0;for(;h&&g<u;){h=!1;for(let o=0;o<e;o++)for(let f=o+1;f<e;f++){const s=new Set([...a(o,r,e),...a(f,r,e),o,f]);let l=0;for(const m of s)l+=i(m);[t[o],t[f]]=[t[f],t[o]];let w=0;for(const m of s)w+=i(m);w<l?(h=!0,g++):[t[o],t[f]]=[t[f],t[o]]}}self.postMessage(t)}})();
