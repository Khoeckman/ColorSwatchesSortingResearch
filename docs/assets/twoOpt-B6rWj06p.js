(function(){"use strict";function b(f,o,r){const t=[],s=f%o,c=Math.floor(f/o),u=Math.floor((r-1)/o);return s>0&&t.push(f-1),s<o-1&&f+1<r&&t.push(f+1),c>0&&t.push(f-o),c<u&&f+o<r&&t.push(f+o),t}self.onmessage=function(f){const{N:o,stride:r,path:t,distMatrix:s,maxImprovements:c}=f.data;function u(e){let n=0;for(const l of i[e])n+=s[t[e]][t[l]];return n}const i=[];for(let e=0;e<o;e++)i[e]=b(e,r,o);let a=!0,m=0;for(;a&&m<c;){a=!1;for(let e=0;e<o;e++)for(let n=e+1;n<o;n++){const l=new Set([...i[e],...i[n],e,n]);let g=0;for(const h of l)g+=u(h);[t[e],t[n]]=[t[n],t[e]];let w=0;for(const h of l)w+=u(h);w<g?(a=!0,m++):[t[e],t[n]]=[t[n],t[e]]}}self.postMessage(t)}})();
